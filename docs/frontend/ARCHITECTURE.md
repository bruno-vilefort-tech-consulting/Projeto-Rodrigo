# üèóÔ∏è Arquitetura do Frontend - ChatIA Flow

> Documenta√ß√£o completa da arquitetura e estrutura do frontend

**Vers√£o do Sistema:** 2.2.2v-26
**√öltima Atualiza√ß√£o:** 2025-10-12

---

## üìë √çndice

1. [Vis√£o Geral](#vis√£o-geral)
2. [Estrutura de Diret√≥rios](#estrutura-de-diret√≥rios)
3. [Camadas da Aplica√ß√£o](#camadas-da-aplica√ß√£o)
4. [Stack Tecnol√≥gico](#stack-tecnol√≥gico)
5. [Fluxo de Dados](#fluxo-de-dados)
6. [Padr√µes Arquiteturais](#padr√µes-arquiteturais)
7. [M√≥dulos e Responsabilidades](#m√≥dulos-e-responsabilidades)
8. [Decis√µes de Design](#decis√µes-de-design)

---

## üéØ Vis√£o Geral

### Caracter√≠sticas Principais

O ChatIA Flow √© uma **Single Page Application (SPA)** constru√≠da com React 17.0.2, seguindo uma **arquitetura de componentes modular** com gerenciamento de estado h√≠brido.

| Caracter√≠stica | Valor |
|---------------|-------|
| **Arquivos TypeScript/JavaScript** | 353 arquivos |
| **Diret√≥rios** | 249 diret√≥rios |
| **Linhas de C√≥digo** | ~80.990 linhas |
| **Componentes** | 149 componentes |
| **P√°ginas** | 43 p√°ginas |
| **Custom Hooks** | 26 hooks |
| **Contexts** | 11 contexts |
| **Depend√™ncias** | 111 pacotes |

### Princ√≠pios Arquiteturais

1. **Component-Based Architecture** - Componentes reutiliz√°veis e isolados
2. **Separation of Concerns** - Separa√ß√£o clara entre UI, l√≥gica e dados
3. **Single Responsibility** - Cada m√≥dulo tem uma √∫nica responsabilidade
4. **DRY (Don't Repeat Yourself)** - Custom hooks e componentes reutiliz√°veis
5. **Progressive Enhancement** - PWA com Service Worker
6. **Real-time First** - Socket.IO para sincroniza√ß√£o em tempo real

### Modelo de Arquitetura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Presentation Layer                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ     43 Pages (Dashboard, Tickets, Contacts, etc.)     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ     149 Components (Modal, Form, List, etc.)          ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       Business Logic Layer                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ     26 Custom Hooks (useTickets, useContacts, etc.)   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ     11 Contexts (Auth, Tickets, WhatsApp, etc.)       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ     Utils & Helpers                                    ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       Data Access Layer                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ     Services (API, Socket.IO, Currency, Timezone)     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ     Axios Client (HTTP)                                ‚îÇ ‚îÇ
‚îÇ  ‚îÇ     Socket.IO Client (WebSocket)                       ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        External APIs                         ‚îÇ
‚îÇ       Backend REST API ‚îÇ Socket.IO Server ‚îÇ CDN              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÇ Estrutura de Diret√≥rios

### Estrutura Completa

```
frontend/src/
‚îú‚îÄ‚îÄ üìÑ index.js                   # Entry point da aplica√ß√£o
‚îú‚îÄ‚îÄ üìÑ App.js                     # Componente raiz
‚îú‚îÄ‚îÄ üìÑ serviceWorker.js           # PWA Service Worker
‚îú‚îÄ‚îÄ üìÑ config.js                  # Configura√ß√µes gerais
‚îú‚îÄ‚îÄ üìÑ rules.js                   # Regras de neg√≥cio
‚îÇ
‚îú‚îÄ‚îÄ üìÅ assets/                    # Arquivos est√°ticos (50+ assets)
‚îÇ   ‚îú‚îÄ‚îÄ images/                   # Imagens, logos, √≠cones
‚îÇ   ‚îî‚îÄ‚îÄ sounds/                   # Notifica√ß√µes sonoras
‚îÇ
‚îú‚îÄ‚îÄ üìÅ components/                # 149 componentes React
‚îÇ   ‚îú‚îÄ‚îÄ MessagesList/
‚îÇ   ‚îú‚îÄ‚îÄ MessageInput/
‚îÇ   ‚îú‚îÄ‚îÄ Ticket/
‚îÇ   ‚îú‚îÄ‚îÄ ContactDrawer/
‚îÇ   ‚îî‚îÄ‚îÄ ... (145 mais)
‚îÇ
‚îú‚îÄ‚îÄ üìÅ pages/                     # 43 p√°ginas
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard/
‚îÇ   ‚îú‚îÄ‚îÄ Tickets/
‚îÇ   ‚îú‚îÄ‚îÄ Contacts/
‚îÇ   ‚îú‚îÄ‚îÄ Users/
‚îÇ   ‚îî‚îÄ‚îÄ ... (39 mais)
‚îÇ
‚îú‚îÄ‚îÄ üìÅ context/                   # 11 React Contexts
‚îÇ   ‚îú‚îÄ‚îÄ Auth/
‚îÇ   ‚îú‚îÄ‚îÄ Tickets/
‚îÇ   ‚îú‚îÄ‚îÄ WhatsApp/
‚îÇ   ‚îî‚îÄ‚îÄ ... (8 mais)
‚îÇ
‚îú‚îÄ‚îÄ üìÅ hooks/                     # 26 Custom Hooks
‚îÇ   ‚îú‚îÄ‚îÄ useAuth.js/
‚îÇ   ‚îú‚îÄ‚îÄ useTickets/
‚îÇ   ‚îú‚îÄ‚îÄ useContacts/
‚îÇ   ‚îî‚îÄ‚îÄ ... (23 mais)
‚îÇ
‚îú‚îÄ‚îÄ üìÅ services/                  # Servi√ßos de integra√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ api.js                    # Axios client
‚îÇ   ‚îú‚îÄ‚îÄ socket.js                 # Socket.IO client
‚îÇ   ‚îú‚îÄ‚îÄ CurrencyService.js        # Formata√ß√£o monet√°ria
‚îÇ   ‚îú‚îÄ‚îÄ TimezoneService.js        # Fuso hor√°rio
‚îÇ   ‚îî‚îÄ‚îÄ flowBuilder.js            # Flow builder utils
‚îÇ
‚îú‚îÄ‚îÄ üìÅ routes/                    # Sistema de rotas
‚îÇ   ‚îú‚îÄ‚îÄ index.js                  # Defini√ß√£o de rotas
‚îÇ   ‚îî‚îÄ‚îÄ Route.js                  # Route Guard
‚îÇ
‚îú‚îÄ‚îÄ üìÅ layout/                    # Layouts da aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ index.js                  # LoggedInLayout
‚îÇ   ‚îú‚îÄ‚îÄ MainListItems.js          # Menu lateral
‚îÇ   ‚îî‚îÄ‚îÄ themeContext.js           # Tema dark/light
‚îÇ
‚îú‚îÄ‚îÄ üìÅ translate/                 # Internacionaliza√ß√£o (i18n)
‚îÇ   ‚îú‚îÄ‚îÄ i18n.js                   # Configura√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ languages/                # 5 idiomas (pt, en, es, tr, ar)
‚îÇ
‚îú‚îÄ‚îÄ üìÅ styles/                    # Estilos globais
‚îÇ   ‚îú‚îÄ‚îÄ global.css
‚îÇ   ‚îî‚îÄ‚îÄ styles.js
‚îÇ
‚îú‚îÄ‚îÄ üìÅ utils/                     # Utilit√°rios
‚îÇ   ‚îú‚îÄ‚îÄ formatToCurrency.js
‚îÇ   ‚îú‚îÄ‚îÄ formatSerializedId.js
‚îÇ   ‚îî‚îÄ‚îÄ ... (6 mais)
‚îÇ
‚îú‚îÄ‚îÄ üìÅ helpers/                   # Fun√ß√µes auxiliares
‚îÇ   ‚îî‚îÄ‚îÄ contrastColor.js
‚îÇ
‚îú‚îÄ‚îÄ üìÅ errors/                    # Tratamento de erros
‚îÇ   ‚îî‚îÄ‚îÄ toastError.js
‚îÇ
‚îî‚îÄ‚îÄ üìÅ stores/                    # Zustand stores
    ‚îî‚îÄ‚îÄ useNodeStorage.js         # FlowBuilder state
```

### M√©tricas por Diret√≥rio

| Diret√≥rio | Arquivos | Prop√≥sito |
|-----------|----------|-----------|
| `/components` | 149 | Componentes React reutiliz√°veis |
| `/pages` | 43 | P√°ginas da aplica√ß√£o |
| `/hooks` | 26 | Custom hooks |
| `/context` | 11 | React Contexts |
| `/services` | 7 | Integra√ß√£o com backend |
| `/translate/languages` | 5 | Arquivos de tradu√ß√£o |
| `/routes` | 2 | Sistema de rotas |
| `/utils` | 8 | Fun√ß√µes utilit√°rias |
| `/assets` | 50+ | Imagens, sons, etc |

---

## üß± Camadas da Aplica√ß√£o

### 1. Presentation Layer (UI)

**Responsabilidade:** Renderiza√ß√£o visual e intera√ß√£o com usu√°rio

**Componentes:**

- **Pages (43)** - P√°ginas completas da aplica√ß√£o
- **Components (149)** - Componentes reutiliz√°veis

**Tecnologias:**

- React 17.0.2
- Material-UI v4 + v5
- CSS-in-JS (makeStyles, styled-components)

**Exemplo:**

```javascript
// pages/Dashboard/index.js
const Dashboard = () => {
  const { user } = useContext(AuthContext);
  const { tickets, loading } = useTickets({ status: "open" });

  return (
    <MainContainer>
      <MainHeader>
        <Title>Dashboard</Title>
      </MainHeader>

      {loading ? (
        <BackdropLoading />
      ) : (
        <TicketsList tickets={tickets} />
      )}
    </MainContainer>
  );
};
```

### 2. Business Logic Layer

**Responsabilidade:** L√≥gica de neg√≥cio, valida√ß√µes, computa√ß√µes

**Componentes:**

- **Custom Hooks (26)** - L√≥gica reutiliz√°vel
- **Contexts (11)** - Estado global
- **Utils** - Fun√ß√µes auxiliares
- **Validators** - Schemas Yup

**Tecnologias:**

- React Hooks
- Context API
- Yup (valida√ß√£o)
- Formik (forms)

**Exemplo:**

```javascript
// hooks/useTickets/index.js
const useTickets = ({ searchParam, status, queueIds }) => {
  const [tickets, setTickets] = useState([]);
  const [loading, setLoading] = useState(true);
  const { socket } = useContext(AuthContext);

  useEffect(() => {
    // Fetch inicial
    fetchTickets();

    // Socket.IO real-time
    socket.on("ticket", handleTicketUpdate);

    return () => socket.off("ticket", handleTicketUpdate);
  }, [searchParam, status, queueIds]);

  return { tickets, loading };
};
```

### 3. Data Access Layer

**Responsabilidade:** Comunica√ß√£o com backend

**Componentes:**

- **API Service** - Axios client
- **Socket Service** - Socket.IO client
- **Currency Service** - Formata√ß√£o monet√°ria
- **Timezone Service** - Convers√£o de fuso hor√°rio

**Tecnologias:**

- Axios 1.6.8
- Socket.IO Client 4.7.4
- Moment.js / date-fns

**Exemplo:**

```javascript
// services/api.js
import axios from "axios";

const api = axios.create({
  baseURL: process.env.REACT_APP_BACKEND_URL,
  withCredentials: true
});

// Request interceptor
api.interceptors.request.use(
  config => {
    const token = localStorage.getItem("token");
    if (token) {
      config.headers.Authorization = `Bearer ${JSON.parse(token)}`;
    }
    return config;
  },
  error => Promise.reject(error)
);

// Response interceptor
api.interceptors.response.use(
  response => response,
  async error => {
    if (error.response?.status === 401) {
      localStorage.clear();
      window.location.href = "/login";
    }
    return Promise.reject(error);
  }
);

export default api;
```

---

## üõ†Ô∏è Stack Tecnol√≥gico

### Core

| Tecnologia | Vers√£o | Prop√≥sito |
|------------|--------|-----------|
| **React** | 17.0.2 | Framework UI |
| **React Router** | 5.2.0 | Roteamento |
| **Material-UI v4** | 4.12.3 | Biblioteca UI principal |
| **Material-UI v5** | 5.17.1 | Componentes modernos |
| **Socket.IO Client** | 4.7.4 | Real-time WebSocket |
| **Axios** | 1.6.8 | Cliente HTTP |
| **React Query** | 3.39.3 | Cache de dados |
| **Zustand** | 4.4.1 | State management (FlowBuilder) |

### UI & Styling

| Tecnologia | Vers√£o | Prop√≥sito |
|------------|--------|-----------|
| **@material-ui/core** | 4.12.3 | Componentes UI base |
| **@mui/material** | 5.17.1 | Componentes UI modernos |
| **styled-components** | 5.3.6 | CSS-in-JS |
| **clsx** | 2.1.0 | Concatena√ß√£o de classes |
| **react-color** | 2.19.3 | Color picker |
| **emoji-mart** | 3.0.0 | Emoji picker |
| **lucide-react** | 0.475.0 | √çcones modernos |

### Forms & Validation

| Tecnologia | Vers√£o | Prop√≥sito |
|------------|--------|-----------|
| **Formik** | 2.2.0 | Gerenciamento de forms |
| **Yup** | 0.32.8 | Valida√ß√£o de schemas |
| **formik-material-ui** | 3.0.1 | Integra√ß√£o Formik + MUI |
| **react-input-mask** | 2.0.4 | M√°scaras de input |

### Charts & Visualization

| Tecnologia | Vers√£o | Prop√≥sito |
|------------|--------|-----------|
| **Chart.js** | 3.9.1 | Gr√°ficos |
| **react-chartjs-2** | 4.3.1 | Wrapper React Chart.js |
| **Recharts** | 2.0.2 | Gr√°ficos alternativos |
| **react-flow-renderer** | 10.3.17 | Flow Builder visual |

### Media & Files

| Tecnologia | Vers√£o | Prop√≥sito |
|------------|--------|-----------|
| **compressorjs** | 1.2.1 | Compress√£o de imagens |
| **react-webcam** | 7.1.1 | Captura de webcam |
| **react-audio-player** | 0.17.0 | Player de √°udio |
| **react-player** | 2.13.0 | Player de v√≠deo |
| **mic-recorder-to-mp3** | 2.2.2 | Grava√ß√£o de √°udio |
| **file-saver** | 2.0.5 | Download de arquivos |
| **xlsx** | 0.18.5 | Exporta√ß√£o Excel |

### Internationalization

| Tecnologia | Vers√£o | Prop√≥sito |
|------------|--------|-----------|
| **i18next** | 19.9.2 | Framework i18n |
| **react-i18next** | 15.4.1 | Integra√ß√£o React |
| **i18next-browser-languagedetector** | 6.0.1 | Detec√ß√£o de idioma |

### Utilities

| Tecnologia | Vers√£o | Prop√≥sito |
|------------|--------|-----------|
| **lodash** | 4.17.21 | Fun√ß√µes utilit√°rias |
| **date-fns** | 2.16.1 | Manipula√ß√£o de datas |
| **moment** | 2.29.4 | Datas e timezone |
| **uuid** | 8.3.2 | Gera√ß√£o de IDs √∫nicos |
| **query-string** | 7.0.0 | Parse de query params |
| **use-debounce** | 7.0.0 | Debouncing |

### Build Tools

| Tecnologia | Vers√£o | Prop√≥sito |
|------------|--------|-----------|
| **react-scripts** | 5.0.1 | Scripts CRA |
| **@craco/craco** | 7.1.0 | Override webpack |
| **TypeScript** | 5.5.3 | Tipagem est√°tica |

---

## üîÑ Fluxo de Dados

### Fluxo Completo End-to-End

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         User Action                          ‚îÇ
‚îÇ        (Click button, Submit form, Type message)             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Component Handler                         ‚îÇ
‚îÇ       const handleSubmit = async (data) => { ... }          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Custom Hook / Context                     ‚îÇ
‚îÇ        useTickets() ‚Üí handleCreateTicket()                   ‚îÇ
‚îÇ        AuthContext ‚Üí handleLogin()                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      API Service                             ‚îÇ
‚îÇ      api.post("/tickets", data)                              ‚îÇ
‚îÇ      socket.emit("ticket:create", data)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       Backend API                            ‚îÇ
‚îÇ        REST API ‚îÇ Socket.IO Server                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Database Operation                        ‚îÇ
‚îÇ        PostgreSQL ‚îÇ Redis ‚îÇ File Storage                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                                       ‚îÇ
    ‚ñº HTTP Response                         ‚ñº Socket.IO Broadcast
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Response Handler   ‚îÇ              ‚îÇ  Socket Event Handler   ‚îÇ
‚îÇ  .then(response)    ‚îÇ              ‚îÇ  socket.on("ticket")    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                                     ‚îÇ
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ    Update State        ‚îÇ
            ‚îÇ  setTickets([...])     ‚îÇ
            ‚îÇ  Context.dispatch()    ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ    Re-render UI        ‚îÇ
            ‚îÇ  React reconciliation  ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Exemplo Pr√°tico: Enviar Mensagem

**1. Usu√°rio digita mensagem e clica "Enviar"**

```javascript
// components/MessageInput/index.js
const MessageInput = ({ ticketId }) => {
  const [message, setMessage] = useState("");

  const handleSendMessage = async () => {
    try {
      await api.post(`/messages/${ticketId}`, {
        body: message,
        fromMe: true
      });
      setMessage(""); // Limpar input
    } catch (err) {
      toastError(err);
    }
  };

  return (
    <TextField
      value={message}
      onChange={e => setMessage(e.target.value)}
      onKeyPress={e => e.key === "Enter" && handleSendMessage()}
    />
  );
};
```

**2. API Service envia para backend**

```javascript
// services/api.js
const response = await api.post(`/messages/${ticketId}`, data);
// POST http://localhost:8080/messages/123
```

**3. Backend processa e retorna resposta HTTP**

```json
{
  "id": 456,
  "ticketId": 123,
  "body": "Ol√°!",
  "fromMe": true,
  "createdAt": "2025-10-12T10:30:00Z"
}
```

**4. Backend tamb√©m envia via Socket.IO para todos clientes**

```javascript
// Backend emite evento
io.to(`company-${companyId}`).emit("appMessage", {
  action: "create",
  message: messageData
});
```

**5. Frontend recebe via Socket.IO e atualiza estado**

```javascript
// hooks/useMessages/index.js
useEffect(() => {
  const handleMessage = (data) => {
    if (data.action === "create") {
      setMessages(prev => [...prev, data.message]);
      // Scroll to bottom
      scrollToBottom();
    }
  };

  socket.on(`company-${companyId}-appMessage`, handleMessage);

  return () => socket.off(`company-${companyId}-appMessage`, handleMessage);
}, []);
```

**6. React re-renderiza componente com nova mensagem**

```javascript
// components/MessagesList/index.js
return (
  <div>
    {messages.map(msg => (
      <MessageItem key={msg.id} message={msg} />
    ))}
  </div>
);
```

---

## üé® Padr√µes Arquiteturais

### 1. Component Composition

```javascript
// ‚úÖ BOM - Composi√ß√£o de componentes
<MainContainer>
  <MainHeader>
    <Title>Tickets</Title>
    <MainHeaderButtonsWrapper>
      <Button onClick={handleNew}>Novo</Button>
    </MainHeaderButtonsWrapper>
  </MainHeader>

  <TicketsManagerTabs>
    <Tab label="Abertos" />
    <Tab label="Pendentes" />
  </TicketsManagerTabs>

  <TicketsList tickets={tickets} />
</MainContainer>
```

### 2. Container/Presentational Pattern

```javascript
// Container (l√≥gica)
const TicketsContainer = () => {
  const { tickets, loading } = useTickets({ status: "open" });

  if (loading) return <BackdropLoading />;

  return <TicketsList tickets={tickets} />;
};

// Presentational (UI pura)
const TicketsList = ({ tickets }) => (
  <div>
    {tickets.map(ticket => (
      <TicketItem key={ticket.id} ticket={ticket} />
    ))}
  </div>
);
```

### 3. Custom Hook Pattern

```javascript
// Encapsular l√≥gica complexa em hook reutiliz√°vel
const useTicketFilter = (tickets) => {
  const [filters, setFilters] = useState({});

  const filteredTickets = useMemo(() => {
    return tickets.filter(ticket => {
      if (filters.status && ticket.status !== filters.status) return false;
      if (filters.queue && ticket.queueId !== filters.queue) return false;
      return true;
    });
  }, [tickets, filters]);

  return { filteredTickets, filters, setFilters };
};
```

### 4. Provider Pattern

```javascript
// Providers aninhados no root
<BrowserRouter>
  <AuthProvider>
    <CurrencyProvider>
      <TicketsContextProvider>
        <WhatsAppsProvider>
          {/* App */}
        </WhatsAppsProvider>
      </TicketsContextProvider>
    </CurrencyProvider>
  </AuthProvider>
</BrowserRouter>
```

### 5. Render Props Pattern

```javascript
<Can
  role={user.profile}
  perform="tickets:delete"
  yes={() => <DeleteButton onClick={handleDelete} />}
  no={() => <Tooltip title="Sem permiss√£o" />}
/>
```

### 6. Higher-Order Component (HOC)

```javascript
// Layout HOC
const withLayout = (Component) => {
  return (props) => (
    <LoggedInLayout>
      <Component {...props} />
    </LoggedInLayout>
  );
};

export default withLayout(Dashboard);
```

---

## üì¶ M√≥dulos e Responsabilidades

### `/components` - Componentes React (149)

**Responsabilidade:** Componentes reutiliz√°veis de UI

**Categorias:**

- **Modais** (35) - UserModal, ContactModal, TicketModal, etc.
- **Tickets** (15) - Ticket, TicketHeader, TicketsList, etc.
- **Mensagens** (8) - MessagesList, MessageInput, MessageOptionsMenu
- **Contatos** (10) - ContactDrawer, ContactModal, ContactForm
- **UI Base** (20) - BackdropLoading, MainContainer, Title, Can
- **Filters** (12) - QueueFilter, StatusFilter, TagsFilter
- **FlowBuilder** (18) - Modais espec√≠ficos do Flow Builder
- **Outros** (31) - Charts, Forms, Previews, etc.

### `/pages` - P√°ginas (43)

**Responsabilidade:** P√°ginas completas da aplica√ß√£o

**Categorias:**

- **P√∫blicas** (4) - Login, Signup, ForgotPassword, ResetPassword
- **Main** (10) - Dashboard, Tickets, Contacts, Users, etc.
- **Admin** (18) - Settings, Queues, Tags, Reports, etc.
- **Features** (11) - FlowBuilder, Campaigns, Kanban, Chat, etc.

### `/context` - React Contexts (11)

**Responsabilidade:** Estado global compartilhado

**Principais:**

- **AuthContext** - Autentica√ß√£o, usu√°rio, socket
- **TicketsContext** - Ticket atual aberto
- **WhatsAppsContext** - Conex√µes WhatsApp
- **CurrencyContext** - Formata√ß√£o monet√°ria

### `/hooks` - Custom Hooks (26)

**Responsabilidade:** L√≥gica reutiliz√°vel e integra√ß√£o com API

**Categorias:**

- **Auth** (1) - useAuth
- **Data/API** (18) - useTickets, useContacts, useUsers, etc.
- **UI** (2) - useLocalStorage, useDate
- **Utils** (5) - useSettings, useVersion, etc.

### `/services` - Servi√ßos (7)

**Responsabilidade:** Integra√ß√£o com backend e APIs externas

**Principais:**

- **api.js** - Cliente Axios HTTP
- **socket.js** - Cliente Socket.IO WebSocket
- **CurrencyService.js** - Formata√ß√£o monet√°ria
- **TimezoneService.js** - Convers√£o de fuso hor√°rio
- **flowBuilder.js** - Utils do Flow Builder

### `/routes` - Rotas (2)

**Responsabilidade:** Defini√ß√£o e prote√ß√£o de rotas

- **index.js** - Todas as 43 rotas
- **Route.js** - Route Guard (prote√ß√£o de rotas)

### `/translate` - i18n (5 idiomas)

**Responsabilidade:** Internacionaliza√ß√£o

**Idiomas suportados:**

- pt.js - Portugu√™s (Brasil)
- en.js - Ingl√™s
- es.js - Espanhol
- tr.js - Turco
- ar.js - √Årabe

---

## üí° Decis√µes de Design

### 1. Por que React 17 ao inv√©s de 18?

**Decis√£o:** Manter React 17.0.2

**Motivos:**

- Compatibilidade com Material-UI v4 (biblioteca principal)
- Evitar breaking changes em projeto grande
- React 17 √© est√°vel e suficiente para necessidades atuais

### 2. Por que Material-UI v4 + v5 ao mesmo tempo?

**Decis√£o:** Usar ambas vers√µes simultaneamente

**Motivos:**

- Migra√ß√£o gradual de v4 para v5
- Novos componentes usam v5
- Componentes legados usam v4
- Evitar reescrever 149 componentes de uma vez

```javascript
// v4
import { Button } from "@material-ui/core";

// v5
import { Button } from "@mui/material";
```

### 3. Por que Context API ao inv√©s de Redux?

**Decis√£o:** Context API + Custom Hooks

**Motivos:**

- Menos boilerplate
- Melhor para TypeScript
- Suficiente para escala atual
- React Query para cache de servidor

### 4. Por que Socket.IO ao inv√©s de WebSockets nativos?

**Decis√£o:** Socket.IO Client 4.7.4

**Motivos:**

- Fallback autom√°tico (polling ‚Üí WebSocket)
- Reconex√£o autom√°tica
- Rooms e namespaces
- Compatibilidade cross-browser

### 5. Por que CRACO ao inv√©s de Eject?

**Decis√£o:** CRACO para override do Webpack

**Motivos:**

- N√£o precisa ejetar Create React App
- Adicionar polyfills Node.js (crypto, stream, buffer)
- Manter atualiza√ß√µes do react-scripts

### 6. Por que PWA?

**Decis√£o:** Progressive Web App com Service Worker

**Motivos:**

- Instal√°vel no desktop/mobile
- Funciona offline (cache)
- Notifica√ß√µes push
- Performance melhorada

### 7. Por que m√∫ltiplos idiomas?

**Decis√£o:** Suporte a 5 idiomas com i18next

**Motivos:**

- Expans√£o internacional
- Detec√ß√£o autom√°tica de idioma do navegador
- F√°cil adicionar novos idiomas
- Mercado global de atendimento

### 8. Por que Formik + Yup?

**Decis√£o:** Formik para forms, Yup para valida√ß√£o

**Motivos:**

- Melhor DX (Developer Experience)
- Valida√ß√£o declarativa
- Integra√ß√£o com Material-UI
- Menos c√≥digo boilerplate

---

## üìä Diagrama de Depend√™ncias

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          App.js                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ               ‚îÇ               ‚îÇ
        ‚ñº               ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Routes   ‚îÇ  ‚îÇ   Contexts     ‚îÇ  ‚îÇ   Theme    ‚îÇ
‚îÇ  (43)     ‚îÇ  ‚îÇ   (11)         ‚îÇ  ‚îÇ   System   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚îÇ               ‚îÇ                   ‚îÇ
      ‚ñº               ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Pages (43)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ           ‚îÇ           ‚îÇ
        ‚ñº           ‚ñº           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Components  ‚îÇ ‚îÇ  Hooks  ‚îÇ ‚îÇ Services ‚îÇ
‚îÇ   (149)     ‚îÇ ‚îÇ  (26)   ‚îÇ ‚îÇ   (7)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ           ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  Backend API ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß Build & Deploy

### Development

```bash
npm start
# ‚Üí Roda em http://localhost:3000
# ‚Üí Hot reload habilitado
# ‚Üí Source maps
```

### Production Build

```bash
npm run build
# ‚Üí Gera pasta build/
# ‚Üí Minifica√ß√£o
# ‚Üí Tree shaking
# ‚Üí Code splitting
# ‚Üí ~2.5 MB gzipped
```

### Otimiza√ß√µes de Build

- **Code Splitting** - Chunks por rota
- **Tree Shaking** - Remove c√≥digo n√£o usado
- **Minification** - Terser para JS, cssnano para CSS
- **Compression** - Gzip + Brotli
- **Asset Optimization** - Imagens otimizadas
- **Bundle Analysis** - source-map-explorer

---

## üìö Recursos Adicionais

### Documentos Relacionados

- [COMPONENTS.md](./COMPONENTS.md) - Todos os 149 componentes
- [PAGES.md](./PAGES.md) - Todas as 43 p√°ginas
- [HOOKS.md](./HOOKS.md) - Todos os 26 hooks
- [CONTEXTS.md](./CONTEXTS.md) - Todos os 11 contexts
- [ROUTING.md](./ROUTING.md) - Sistema de rotas
- [STATE-MANAGEMENT.md](./STATE-MANAGEMENT.md) - Gerenciamento de estado
- [API.md](./API.md) - APIs e servi√ßos

---

**√öltima Atualiza√ß√£o:** 2025-10-12
**Vers√£o do Sistema:** 2.2.2v-26
**Autor:** Bruno Vilefort
**Status:** ‚úÖ Completo
